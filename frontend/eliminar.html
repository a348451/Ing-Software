<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eliminar elemento</title>
    <link rel="stylesheet" href="../stylesheets/eliminar.css">
</head>
<body>
    <div class="header">
        <h1>Administración del menú.</h1>
    </div>

    <div class="contenido">
        <h2>Selecciona el elemento que deseas eliminar:</h2>
        <form>
            <label for="elemento"><b>Elemento a eliminar:</b></label>
            <select id="elemento" name="elemento">
            </select>
            <div class="center-button text-center mt-3"> 
                <button class="btn" type="submit"><b>Eliminar</b></button>
            </div>
        </form>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const selectElemento = document.getElementById("elemento");
    
            fetch('http://localhost:4001/')
                .then(response => response.json())
                .then(data => {
                    objs = data.obj;
                    objs.forEach(elemento => {
                        const option = document.createElement("option");
                        option.value = elemento._id;
                        option.textContent = elemento._nombre;
                        selectElemento.appendChild(option);
                    });
                })
                .catch(error => console.error("Error al obtener elementos:", error));
        });

        document.addEventListener("submit", (event)=>{
            event.preventDefault();
            const id = document.getElementById('elemento').value;
            const obj = {id: id}
            const data = JSON.stringify(obj);
            fetch(`http://localhost:4001/delete`,{
                method: 'DELETE',
                body: data
            })
        })
    </script>
    
</body>
</html>
